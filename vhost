server {
    server_name  studiofonkel.nl;
    return       301 https://www.studiofonkel.nl/$request_uri;
}
server {
    server_name  www.studiofonkel.nl;
    return       301 https://www.studiofonkel.nl/$request_uri;
}

server {
  server_name [REPLACE_WITH_CNAME];
  listen 443 ssl;
  root [REPLACE_WITH_BUILD_PATH];
  index index.html;
  error_page  404  /404;

  location / {
    try_files $uri $uri/ @rewrites;
  }

  location @rewrites {
    rewrite ^ /index.html last;
  }

  location ~* \.(jpg|jpeg|gif|css|png|js|ico|html|svg)$ {
    access_log off;
    expires max;
    add_header Pragma public;
    add_header Cache-Control "public, must-revalidate, proxy-revalidate";
  }

  location ~ /\.ht {
    deny  all;
  }

  location /mooie-dingen {
       rewrite ^/.* /cases permanent;
    }
  location /team {
       rewrite ^/.* /over-ons permanent;
    }
  location /archetypen-je-merkpersoonlijkheid-als-strategie {
       rewrite ^/.* /blogs/archetypen/ permanent;
    }
  location /communicatie-begint-aan-de-binnenkant {
       rewrite ^/.* /blogs/communicatie/ permanent;
    }
  location /12-archetypen {
       rewrite ^/.* /blogs/12-archetypen/ permanent;
    }
  location /contact {
       rewrite ^/.* /over-ons permanent;
    }
  location /service {
       rewrite ^/.* /aanpak permanent;
    }
  location /webapplicatie/nederlandse-branchevereniging-voor-de-timmerindustrie {
       rewrite ^/.* /cases/nbvt permanent;
    }
  location /webapplicaties-webdesign/green-deal-bevorderen-duurzaam-bosbeheer {
       rewrite ^/.* /cases/nbvt permanent;
    }
  location /webapplicaties/novire-q-suite {
       rewrite ^/.* /cases/novire permanent;
    }
  location /webdesign/novire-systems {
       rewrite ^/.* /cases/novire permanent;
    }
  location /webdesign/zuyderduin {
       rewrite ^/.* /cases/ permanent;
    }
  location /webapplicaties-webdesign/mijn-taal {
       rewrite ^/.* /cases/ permanent;
   }
  location /infographics/hogeschool-utrecht-boek {
       rewrite ^/.* /cases/ permanent;
   }
  location /cartografie/noordzee-cartogafie {
       rewrite ^/.* /cases/ permanent;
   }
  location /cartografie-webdesign/h√∂rmann-partnerwebsite {
       rewrite ^/.* /cases/hormann/ permanent;
   }
  location /cartografie-webdesign/tandzorg-op-maat {
       rewrite ^/.* /cases/tom/ permanent;
   }
  location /cartografie-webdesign/green-giraffe-energy-bankers {
       rewrite ^/.* /cases/greengiraffe/ permanent;
   }
  location /webdesign/communicatiebureau-de-kippen {
       rewrite ^/.* /cases/ permanent;
   }
  location /infographics/nationaal-rapporteur-mensenhandel-en-seksueel-geweld-tegen-kinderen {
       rewrite ^/.* /cases/ permanent;
   }
  location /webdesign/atechpro {
       rewrite ^/.* /cases/atechpro/ permanent;
   }
  location /cartografie/mensenhandel-nederland {
       rewrite ^/.* /cases/ permanent;
   }
  location /prowebdesign/trans-world-radio {
       rewrite ^/.* /cases/ permanent;
   }

   add_header Strict-Transport-Security "max-age=63072000; includeSubdomains; preload";
   add_header Public-Key-Pins 'pin-sha256="klO23nT2ehFDXCfx3eHTDRESMz3asj1muO+4aIdjiuY="; pin-sha256="633lt352PKRXbOwf4xSEa1M517scpD3l5f79xMD9r9Q="; max-age=2592000; includeSubDomains';
   ssl on;
   ssl_certificate /etc/nginx/ssl/studiofonkel_nl/ssl-bundle.crt;
   ssl_certificate_key /etc/nginx/ssl/studiofonkel_nl/studiofonkel_nl.key;

   ssl_session_timeout 5m;
   ssl_protocols TLSv1.2;
   ssl_prefer_server_ciphers on;
   # ssl_ciphers "EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH";
   ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!3DES:!MD5:!PSK';
   ssl_session_cache shared:SSL:10m;
   ssl_dhparam /etc/nginx/ssl/dhparam.pem;

   # OCSP Stapling ---
   # fetch OCSP records from URL in ssl_certificate and cache them
   ssl_stapling on;
   ssl_stapling_verify on;

   ssl_trusted_certificate /etc/ssl/PositiveSSL_Bundle.crt;
}
